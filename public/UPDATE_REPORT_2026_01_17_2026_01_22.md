# 업데이트 리포트
## 2026년 1월 17일 ~ 2026년 1월 23일

---

## 📋 목차
1. [UI/UX 개선](#1-uiux-개선)
2. [기능 추가](#2-기능-추가)
3. [버그 수정](#3-버그-수정)
4. [콘텐츠 및 페이지 개발](#4-콘텐츠-및-페이지-개발)
5. [배포 및 인프라](#5-배포-및-인프라)
6. [성능 최적화](#6-성능-최적화)

---

## 1. UI/UX 개선

### 1.1 홈 화면 리디자인
- **날짜**: 2026년 1월 20일
- **내용**:
  - 슬라이딩 탭 홈 화면 디자인 구현 (70/30 분할 레이아웃)
  - 액체 연결 탭 인터페이스 구현 (베지어 곡선 효과)
  - 반전 반경 CSS 클래스 추가
  - 탭 전환 및 곡선 효과 동기화 애니메이션 타이밍 추가
  - 메인 화면 레이아웃 개선 (화이트 카드 디자인 및 슬림 하단 네비게이션)
  - 메인 버튼을 50px 위로 이동
  - 액체 탭 곡선 정렬 개선 (흰색 간격 방지)
  - 애니메이션 타이밍 최적화 (0.2s/0.5s 동기화)
  - Hydration 오류 방지를 위한 suppressHydrationWarning 추가

### 1.2 네비게이션 개선
- **날짜**: 2026년 1월 22일
- **내용**:
  - 하단 네비게이션 바 텍스트 및 아이콘 크기 50% 증가
    - 아이콘: 16px → 24px (h-4 w-4 → h-6 w-6)
    - 텍스트: 10px → 14px (text-[10px] → text-sm)
    - 폰트: 12px → 16px (text-xs → text-base)
  - 가시성 향상으로 사용자 경험 개선

### 1.3 가독성 개선
- **날짜**: 2026년 1월 22일
- **내용**:
  - 전통혼례 맛보기 페이지 폰트 크기 증가
    - 본문 텍스트: 15px → 16px (text-base)
    - 설명 텍스트: 14px → 15px
  - 돌잔치 맛보기 페이지 폰트 크기 증가
    - 본문 텍스트: 13px → 15px
    - 리스트 항목: 14px → 15px
    - 태그: 12px → 14px
  - 전체 콘텐츠 섹션의 가독성 향상

### 1.4 홈 화면 탭 상태 유지
- **날짜**: 2026년 1월 22일
- **내용**:
  - localStorage를 활용한 홈 화면 탭 상태 저장 기능
  - 전통혼례/돌잔치 탭 선택 상태가 페이지 이동 후에도 유지
  - Hydration 오류 해결을 위한 클라이언트 사이드 상태 관리 개선

### 1.5 스크롤 기반 섹션 애니메이션
- **날짜**: 2026년 1월 23일
- **내용**:
  - 전통혼례 및 돌잔치 맛보기 페이지에 스크롤 기반 애니메이션 추가
  - Intersection Observer API를 활용한 섹션별 fade-in 및 slide-up 효과
  - 각 섹션이 뷰포트에 진입할 때 순차적으로 나타나는 애니메이션
  - 애니메이션 지속 시간: 0.6초 (ease-out 타이밍)
  - 탭 변경 시 새 섹션 자동 관찰 기능
  - 모든 주요 섹션(제목, 카드, 박스 등)에 적용

### 1.6 맛보기 페이지 헤더 타이틀 크기 증가
- **날짜**: 2026년 1월 23일
- **내용**:
  - 전통혼례 및 돌잔치 맛보기 페이지의 메인 타이틀 폰트 크기 2단계 증가
  - text-2xl → text-4xl로 변경하여 가시성 향상

### 1.7 탭 네비게이션 스타일 개선
- **날짜**: 2026년 1월 23일
- **내용**:
  - 탭 라벨 폰트 크기 증가 (14px → 16px, 15px → 16px)
  - 비활성 탭 텍스트 색상 조정 (더 진한 회색으로 변경)
  - 가독성 및 시각적 계층 구조 개선

---

## 2. 기능 추가

### 2.1 전통혼례 맛보기 페이지
- **날짜**: 2026년 1월 22일
- **내용**:
  - YouTube 영상 삽입 (모집 개요 탭)
    - 영상 ID: 6LeMb6RjH-Y
    - 불필요한 YouTube 옵션 숨김 처리
  - 전통혼례 안내 탭 개선
    - 6~8번째 의례(전안례, 교배례, 합근례) 파란색 배경 및 흰색 텍스트로 강조
    - 진행 순서 섹션에 4장의 사진 추가
  - 장소안내 탭
    - 한국의집 이미지 추가
    - 다음 지도(Roughmap) 통합 (iframe 방식)
  - 식사안내 탭
    - 갈비탕 이미지 추가
    - 특제 갈비탕 설명 업데이트

### 2.2 돌잔치 맛보기 페이지
- **날짜**: 2026년 1월 22일
- **내용**:
  - YouTube 영상 삽입 (모집 개요 탭)
    - 영상 ID: iWA4IC2MqXo
    - 전통혼례와 동일한 스타일 및 옵션 적용
  - 돌잔치 안내 탭
    - 4단계 진행 순서에 사진 추가 (1, 2, 3, 4단계 모두)
  - 장소안내 탭
    - 우금헌 이미지 추가
    - 다음 지도 통합 (전통혼례와 동일)
  - 다과안내 탭 구현

### 2.3 전화 문의 기능
- **날짜**: 2026년 1월 22일
- **내용**:
  - 네비게이션 바의 "전화 문의" 버튼에 실제 전화번호 연결
  - 전화번호: 02-3011-9295
  - 모바일 환경에서 전화 앱 자동 실행

### 2.4 주소 검색 API 통합
- **날짜**: 2026년 1월 21일
- **내용**:
  - 다음 주소 검색 API 통합
  - ApplicationDataStep에 주소 검색 기능 추가
  - CSP 설정 업데이트 (postcode.map.daum.net 추가)
  - 개발/프로덕션 환경별 CSP 설정 분리
  - layout.tsx에 다음 API 스크립트 로드 추가

### 2.5 중복 신청 체크
- **날짜**: 2026년 1월 21일
- **내용**:
  - API 엔드포인트를 통한 중복 신청 확인 기능
  - 사용자 경험 개선

### 2.6 자동 하이픈 처리
- **날짜**: 2026년 1월 21일
- **내용**:
  - 전화번호 자동 하이픈 처리
  - 사업자번호 자동 하이픈 처리

### 2.7 찾아가는 돌잔치 팀 관리
- **날짜**: 2026년 1월 21일
- **내용**:
  - 단일 대상에서 팀 배열로 변경
  - 팀 추가/삭제 기능 구현
  - 팀당 여러 명 입력 기능 (쉼표로 구분)
  - 이름/생년월일/성별 개수 일치 검증
  - 기존 target 데이터와의 하위 호환성 지원

### 2.8 관리자 기능 개선
- **날짜**: 2026년 1월 19일 ~ 1월 20일
- **내용**:
  - 업로드된 파일별 문서명 표시 기능
  - 여러 지원 유형에 대한 순차적 문서 업로드 구현
  - 찾아가는 돌잔치 다중 팀 및 다중 인원 표시
  - 테이블 레이아웃으로 다중 인원 표시 지원

### 2.9 전통혼례 안내 자동 스크롤 애니메이션
- **날짜**: 2026년 1월 23일
- **내용**:
  - 전통혼례 안내 탭의 12단계 프로세스에 자동 스크롤 기능 추가
  - 핵심 의례(교배례)가 화면 중앙에 오도록 자동 스크롤
  - requestAnimationFrame을 활용한 부드러운 애니메이션
  - ease-out cubic 이징 함수 적용 (2초 동안 점진적 감속)
  - 탭이 열릴 때마다 자동으로 실행

### 2.10 돌잔치 다과안내 콘텐츠 개선
- **날짜**: 2026년 1월 23일
- **내용**:
  - "특제 다과"를 "떡케이크"로 변경
  - "답례떡" 섹션 추가 (떡케이크와 동일한 스타일)
  - 떡케이크 및 답례떡 이미지 추가
  - 이미지 텍스트 오버레이 제거
  - 설명 텍스트 업데이트 (더 상세하고 감성적인 문구로 변경)
  - "하객 최대 10명" 정보를 답례떡 섹션에만 유지

### 2.11 돌잔치 장소안내 개선
- **날짜**: 2026년 1월 23일
- **내용**:
  - 지도 토글 버튼 추가 (지도보기/지도 숨기기)
  - "찾아가는 돌잔치" 섹션 추가
  - 이미지 오버레이 추가 (돌잔치, 찾아가는 돌잔치)
  - 섹션별 상세 설명 텍스트 추가

### 2.12 전통혼례 장소안내 레이아웃 개선
- **날짜**: 2026년 1월 23일
- **내용**:
  - 캡션 텍스트를 주소 바로 아래로 이동
  - 안내 박스를 한국의집 섹션과 지도 사이로 이동
  - 정보 계층 구조 개선

### 2.13 파일명 자동 생성 및 메타데이터 관리
- **날짜**: 2026년 1월 22일 ~ 1월 23일
- **내용**:
  - 파일 업로드 시 자동 파일명 생성: `[신청자이름]_[증빙서류명]_[날짜시간].확장자`
  - Supabase Storage에는 UUID 기반 영문 파일명 저장
  - 데이터베이스에 원본 한글 파일명을 file_metadata JSONB 필드에 저장
  - 관리자 모드에서 다운로드 시 원본 한글 파일명 사용
  - 편집 모드에서 증빙서류별 파일 필터링 개선

---

## 3. 버그 수정

### 3.1 돌잔치 지원 유형 선택
- **날짜**: 2026년 1월 22일
- **내용**:
  - 한부모가족 기본 선택 제거
  - 사용자가 명시적으로 선택하도록 변경
  - 편집 모드에서 이전 선택값 표시 유지
  - 필수 필드 검증 유지

### 3.2 돌잔치 날짜 선택
- **날짜**: 2026년 1월 22일
- **내용**:
  - 일요일만 선택 가능하도록 수정
  - 알림 메시지 업데이트
  - isDateSelectable 함수와의 일관성 확보

### 3.3 날짜 선택 개선
- **날짜**: 2026년 1월 18일 ~ 1월 21일
- **내용**:
  - 전통혼례 및 돌잔치 날짜 선택을 일요일만 허용하도록 변경
  - 첫 번째 우선순위 날짜만 선택 시 알림 팝업 추가
  - 전통혼례 시간대 옵션에서 18:00 제거 (12:00, 15:00만 유지)
  - 찾아가는 돌잔치는 모든 요일 선택 가능 유지

### 3.4 문서 업로드 표시
- **날짜**: 2026년 1월 21일
- **내용**:
  - 초기 모드에서 기존 파일 숨김 처리
  - 편집 모드에서만 기존 파일 표시

### 3.5 지원 유형별 문서 처리
- **날짜**: 2026년 1월 19일
- **내용**:
  - 전통혼례 특이 케이스 문서 추가 (targetCategory 기반)
  - 찾아가는 돌잔치 문서를 개별 업로드로 분리 (복지시설/영아원)
  - RequiredDocument 타입 import 추가

### 3.6 하위 호환성
- **날짜**: 2026년 1월 21일
- **내용**:
  - VisitingDoljanchiApplicationData에 선택적 target 속성 추가
  - 기존 데이터 형식과의 호환성 유지
  - TypeScript 컴파일 오류 해결

### 3.7 날짜 선택 캘린더 범위 제한
- **날짜**: 2026년 1월 23일
- **내용**:
  - 신청 화면의 날짜 선택 캘린더를 4월 1일 ~ 11월 29일로 제한
  - 1월, 2월, 3월, 12월 달력 제거
  - 예약 가능 기간에 맞춘 UI 개선

### 3.8 파일 업로드 및 메타데이터 저장 문제
- **날짜**: 2026년 1월 22일 ~ 1월 23일
- **내용**:
  - file_metadata가 빈 객체로 저장되던 문제 수정
  - 편집 모드에서 증빙서류별 파일 필터링 로직 개선
  - 관리자 모드에서 파일명 표시 및 다운로드 기능 개선
  - file_metadata JSONB 파싱 로직 강화 (문자열/객체 타입 모두 지원)

### 3.9 돌잔치 장소안내 지도 표시 문제
- **날짜**: 2026년 1월 23일
- **내용**:
  - 조건부 렌더링된 지도에 scroll-section 클래스 적용으로 인한 표시 문제 해결
  - 지도는 animate-fadeIn만 사용하도록 수정
  - 스크롤 애니메이션과 조건부 렌더링의 충돌 해결

### 3.10 관리자 모드 파일명 표시
- **날짜**: 2026년 1월 23일
- **내용**:
  - 관리자 모드에서 UUID 기반 파일명 대신 원본 한글 파일명 표시
  - file_metadata에서 원본 파일명 조회 로직 개선
  - URL 매칭 로직 강화 (부분 경로 매칭 지원)

---

## 4. 콘텐츠 및 페이지 개발

### 4.1 전통혼례 맛보기 페이지
- **날짜**: 2026년 1월 22일
- **주요 기능**:
  - 4개 탭 구조 (모집개요, 전통혼례 안내, 장소안내, 식사안내)
  - YouTube 영상 임베드
  - 12단계 전통혼례 의례 설명
  - 진행 순서 이미지 (4장)
  - 다음 지도 통합
  - 특제 갈비탕 소개

### 4.2 돌잔치 맛보기 페이지
- **날짜**: 2026년 1월 22일
- **주요 기능**:
  - 4개 탭 구조 (모집개요, 돌잔치 안내, 장소안내, 다과안내)
  - YouTube 영상 임베드
  - 4단계 진행 순서 이미지
  - 다음 지도 통합
  - 특제 다과 소개

### 4.3 오픈 공지 화면
- **날짜**: 2026년 1월 19일
- **내용**:
  - 오픈 공지 화면 추가
  - 관리자 테스트 라우트 추가

### 4.4 돌잔치 다과안내 콘텐츠 확장
- **날짜**: 2026년 1월 23일
- **내용**:
  - 떡케이크 섹션: 프리미엄 캐릭터 떡케이크 소개
  - 답례떡 섹션: 앙증맞은 캐릭터 답례떡 소개
  - 각 섹션별 고품질 이미지 추가
  - 감성적인 설명 텍스트로 콘텐츠 품질 향상

### 4.5 돌잔치 장소안내 콘텐츠 확장
- **날짜**: 2026년 1월 23일
- **내용**:
  - 한국의집 우금헌 섹션 개선
  - 찾아가는 돌잔치 섹션 추가 (복지시설 또는 영아원 등 신청자 지정 장소)
  - 지도 토글 기능으로 레이아웃 최적화
  - 각 섹션별 상세 설명 및 이미지 오버레이 추가

### 4.6 전통혼례 장소안내 레이아웃 개선
- **날짜**: 2026년 1월 23일
- **내용**:
  - 정보 계층 구조 재구성
  - 캡션 및 안내 박스 위치 최적화
  - 사용자 정보 흐름 개선

---

## 5. 배포 및 인프라

### 5.1 Netlify 배포 설정
- **날짜**: 2026년 1월 22일
- **내용**:
  - CSP 헤더 통합 관리 (middleware.ts로 단일화)
  - netlify.toml 및 public/_headers에서 CSP 헤더 제거
  - 헤더 충돌 방지
  - daum-map.html iframe 로드 문제 해결
  - frame-ancestors 설정 최적화

### 5.2 다음 지도 통합
- **날짜**: 2026년 1월 22일
- **내용**:
  - iframe 방식으로 다음 지도(Roughmap) 통합
  - document.write 문제 해결
  - public/daum-map.html 파일 생성
  - CSP 설정 업데이트 (다음 지도 도메인 허용)
  - X-Frame-Options: SAMEORIGIN 헤더 추가
  - Netlify 배포 환경에서 iframe 로드 문제 해결

### 5.3 이미지 파일 관리
- **날짜**: 2026년 1월 20일
- **내용**:
  - 이미지 파일을 public/images 디렉토리로 이동
  - Netlify 배포를 위한 경로 최적화
  - doljanchi_baby.png 이미지 크기 70%로 축소

### 5.4 Content Security Policy (CSP) 설정
- **날짜**: 2026년 1월 21일 ~ 1월 22일
- **내용**:
  - YouTube 임베드 허용 (frame-src)
  - 다음 지도 API 도메인 허용
  - Pretendard 폰트 CDN 허용
  - 개발/프로덕션 환경별 CSP 설정 분리
  - HTTP/HTTPS 혼용 리소스 지원

---

## 6. 성능 최적화

### 6.1 애니메이션 최적화
- **날짜**: 2026년 1월 20일
- **내용**:
  - 액체 탭 곡선 애니메이션 타이밍 최적화
  - 탭 전환과 곡선 효과 동기화
  - cubic-bezier 이징 함수 적용
  - 애니메이션 지연 시간 조정 (0.5s → 0.7s)

### 6.2 이미지 최적화
- **날짜**: 2026년 1월 20일
- **내용**:
  - doljanchi_baby.png 이미지 크기 70%로 축소
  - 이미지 로드 실패 시 placeholder 표시

### 6.3 스크롤 애니메이션 성능 최적화
- **날짜**: 2026년 1월 23일
- **내용**:
  - Intersection Observer를 활용한 효율적인 뷰포트 감지
  - 한 번만 애니메이션 실행되도록 옵저버 해제
  - threshold 및 rootMargin 최적화로 성능 향상
  - CSS transition을 활용한 GPU 가속 애니메이션

---

## 📊 통계

### 커밋 통계
- **총 커밋 수**: 약 70개
- **주요 업데이트 기간**: 2026년 1월 17일 ~ 1월 23일 (7일간)

### 주요 카테고리별 분포
1. **UI/UX 개선**: 약 30개 커밋
2. **기능 추가**: 약 20개 커밋
3. **버그 수정**: 약 12개 커밋
4. **배포/인프라**: 약 8개 커밋
5. **콘텐츠 개발**: 약 5개 커밋

---

## 🎯 주요 성과

1. **사용자 경험 개선**
   - 홈 화면 리디자인으로 직관적인 인터페이스 제공
   - 폰트 크기 증가로 가독성 향상
   - 네비게이션 바 개선으로 접근성 향상

2. **콘텐츠 품질 향상**
   - 전통혼례 및 돌잔치 맛보기 페이지 완성
   - 멀티미디어 콘텐츠 통합 (YouTube, 지도, 이미지)
   - 상세한 정보 제공으로 사용자 이해도 향상

3. **기술적 안정성**
   - CSP 설정 통합으로 보안 강화
   - Netlify 배포 환경 최적화
   - 하위 호환성 유지
   - 파일 메타데이터 관리 시스템 구축

4. **기능 완성도**
   - 주소 검색 API 통합
   - 중복 신청 체크 기능
   - 찾아가는 돌잔치 팀 관리 기능
   - 파일명 자동 생성 및 원본 파일명 보존 시스템

5. **사용자 경험 향상**
   - 스크롤 기반 섹션 애니메이션으로 시각적 흥미 유발
   - 전통혼례 안내 자동 스크롤로 핵심 정보 강조
   - 맛보기 페이지 콘텐츠 확장 및 품질 향상

---

## 📝 참고사항

- 모든 커밋 메시지는 영어로 작성되어 Git 저장소 무결성 유지
- Netlify 배포 환경에서의 테스트 및 검증 완료
- 모바일 환경 최적화 고려
- 접근성 및 사용성 개선 지속적 진행

---

**작성일**: 2026년 1월 23일  
**작성자**: 개발팀  
**버전**: 1.1
